# kwaf
Web application firewall as a service

## Architecture

```ditaa
+---+----+----+---------------------------------------------------------------------------+-------------+
|   |    |    |                                     Web Application Firewall (WAF)        |
|   |    |    |                                                                           |
|   |    |    |                                                                           |
|   |    |    |                                                                           +
| +-v----v----v-+
| | +---------+ |
| | | nginx   | |
| | | HAProxy | |
| | +---------+ |
| +---+----+----+
|     |    |
|     |    |
| +---v----v---+
| |    API     |
| +------------+
|
|
|
|
|
|                                              +     +                |                         + +     +
|                                              |     |                |                         | |     |
|                                              |     |                |                         | |     |
|                                              |     |                +-------------------------+ |     |
|                                              |     |                                            |     |
|                                              | +---v-----------------------------------+        |     |
|                                              | |             kwaf                      |        |     |
|                                              | | /createE^ent                          |        |     |
|              +--------------+     persist    | | /ratings                              |        |     |
|              |redis         <------------------+ /ratings/?user_id=userID              |        |     |
|    counters  |hazelcast     |                | |                                       |        |     |
|              |apache ignite |                | |                                       |        |     |
|              |              |                | +---------------------------------------+        |     |
|    logs      |PostgreSQL    |                +--------------------------------------------------+     |
|              +--------------+                                                                         |
+-------------------------------------------------------------------------------------------------------+

``` 
